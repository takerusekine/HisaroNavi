function toggleRegion(){areaselect(),imgratio()}function imgratio(){var a=$("#kvimg").outerWidth(),e=1068*a/1600;$("#kvimg").css("height",e+"px")}function areaselect(){$.each($("#areamap button"),function(){$(this).on("click",function(){$("#areamodal").modal("hide");var a=$(this).text();a=$.trim(a);var e=$(this).attr("id").replace("area-","");$("#areaname").val(a),$("input[name=area_flash]").attr("value",a),$("#areaname").attr("value",a),$("#areaname").attr("data-area",e),$.cookie("hisaronavi_area",a)})})}function topnavheight(){var a=$("#topnav").height();$("#logo").css("height",a+"px")}function mapListChange(){$("#btn-map").on("click",function(){$("#regionList").css("display","none"),$("#regionMap").css("display","block"),$("#btn-list").removeClass("btn-warning"),$("#btn-list").addClass("btn-secondary"),$(this).removeClass("btn-secondary"),$(this).addClass("btn-warning")}),$("#btn-list").on("click",function(){$("#regionMap").css("display","none"),$("#regionList").css("display","block"),$("#btn-map").removeClass("btn-warning"),$("#btn-map").addClass("btn-secondary"),$(this).removeClass("btn-secondary"),$(this).addClass("btn-warning")})}function sliderClick(){$(".sliderIndex li").on("click",function(){var a=$(this).index();$(".sliderIndex li").removeClass("active"),$(this).addClass("active"),$(".slider li").removeClass("showimg"),$(".slider li").css("display","none"),$(".slider li").eq(a).fadeIn().addClass("showimg")})}function countHit(){var a=$("#count").text();$("#ajax-counter").text(a)}function areaRefineAjax(){var a=[];$("input[name=area]").on("click",function(){a=[],$("#ajax-counter").hide(),$("#loading").show();var e=$("input[name=lg-region]").val();$("input[name=area]:checked").each(function(){a.push($(this).val())}),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({type:"GET",url:"result",data:{ajaxData:a,ajaxLgArea:e},timeout:1e4}).done(function(a){$("#regionSelect").html(a),$("#ajax-counter").text($("#count").text()),$("#loading").hide(),$("#ajax-counter").show()}).fail(function(a){alert("おや、何かがおかしいようです。再度選択しなおしてください。")})})}function kodawariRefine(){var a=[],e=$("input[name=lg-region]").val(),t=0,n=0;$("select[name=lower_price]").on("change",function(){t=$(this).val(),console.log($(this).val())}),$("select[name=upper_price]").on("change",function(){n=$(this).val(),console.log($(this).val())}),$("input[name=kodawari], select[name=upper_price], select[name=lower_price]").on("change",function(){a=[],$("#ajax-counter").hide(),$("#loading").show(),$("input[name=kodawari]:checked").each(function(){a.push($(this).val())}),console.log(a),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({type:"GET",url:"search/result",data:{ajaxData:a,ajaxLgArea:e,ajaxLP:t,ajaxUP:n},timeout:1e4}).done(function(a){$("#ajaxReplace").html(a),$("#ajax-counter").text($("#count").text()),$("#loading").hide(),$("#ajax-counter").show()}).fail(function(a){alert("おや、何かがおかしいようです。")})})}$(document).ready(function(){topnavheight(),$(".nav-item a").click(function(a){a.preventDefault(),$(this).tab("show")}),$("#areamodal").modal("show"),$('[data-toggle="tooltip"]').tooltip(),toggleRegion(),mapListChange(),sliderClick(),areaRefineAjax(),kodawariRefine(),countHit(),$("#gobacktop").click(function(){var a=400,e=$(this).attr("href"),t=$("#"==e||""==e?"html":e),n=t.offset().top;return $("body,html").animate({scrollTop:n},a,"swing"),!1})}),$("#regionBtn").on("click",function(){$("#areamodal").modal("show")}),$(".refine-btns button").on("click",function(){var a=$(this).attr("data-refine");$(".menulist dl").removeClass("vis last-bd"),$(".refine-btns button").removeClass("refine-btn-active"),$(".refine-fix li").removeClass("refine-active"),$(".menulist").children("dl").fadeOut(),$("p.alertmsg").fadeOut(),$(this).addClass("refine-btn-active"),"all"===a?($(".menulist").children("dl").addClass("vis"),$(".refine-fix li[data-refine=all]").addClass("refine-active"),$(".menulist").children("dl").fadeIn(),$(".vis").last().addClass("last-bd")):($(".menulist").children("dl[data-grade="+a+"]").addClass("vis"),$(".refine-fix li").eq(a).addClass("refine-active"),$(".menulist").children("dl[data-grade=5]").addClass("vis"),$(".vis").last().addClass("last-bd"),$(".menulist").children("dl[data-grade="+a+"]").fadeIn(),$(".menulist").children("dl[data-grade=5]").fadeIn(),0===$(".vis").length&&$(".menulist").after('<p class="alertmsg">'+$(this).text()+"のマシーンメニュー情報はありません</p>"))}),$(".refine-fix li").on("click",function(){var a=$(this).attr("data-refine");$(".menulist dl").removeClass("vis last-bd"),$(".refine-btns button").removeClass("refine-btn-active"),$(".refine-fix li").removeClass("refine-active"),$(".menulist").children("dl").fadeOut(),$("p.alertmsg").fadeOut(),$(".refine-btns button[data-refine="+a+"]").addClass("refine-btn-active"),"all"===a?($(".menulist").children("dl").addClass("vis"),$(".refine-fix li[data-refine=all]").addClass("refine-active"),$(".menulist").children("dl").fadeIn(),$(".vis").last().addClass("last-bd")):($(".menulist").children("dl[data-grade="+a+"]").addClass("vis"),$(".refine-fix li").eq(a).addClass("refine-active"),$(".menulist").children("dl[data-grade=5]").addClass("vis"),$(".vis").last().addClass("last-bd"),$(".menulist").children("dl[data-grade="+a+"]").fadeIn(),$(".menulist").children("dl[data-grade=5]").fadeIn(),0===$(".vis").length&&$(".menulist").after('<p class="alertmsg">'+$(this).text()+"のマシーンメニュー情報はありません</p>"))}),$(window).scroll(function(){function a(){var a=window.document.body,e=window.document.documentElement,t=a.scrollTop||e.scrollTop;return e.scrollHeight-e.clientHeight-t}$("#menuindex").hasClass("active")&&(a()<200?$(".refine-fix-wrapper").fadeOut(200):$(".refine-fix-wrapper").fadeIn(200))});